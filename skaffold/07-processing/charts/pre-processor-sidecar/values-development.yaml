# Development values for pre-processor-sidecar
# Testing configuration with extended intervals and debug logging

image:
  repository: kaikei/pre-processor-sidecar
  tag: dev
  pullPolicy: Always  # Always pull in development

# Development CronJob configuration (longer intervals for testing)
cronJob:
  schedule: "0 */2 * * *"  # Every 2 hours in development
  timeZone: "UTC"
  concurrencyPolicy: "Forbid"
  startingDeadlineSeconds: 3600
  successfulJobsHistoryLimit: 2
  failedJobsHistoryLimit: 3
  backoffLimit: 1  # Fail fast in development
  activeDeadlineSeconds: 1800  # 30 minutes max
  restartPolicy: "OnFailure"

# Development resources (minimal)
resources:
  requests:
    memory: "64Mi"
    cpu: "50m"
  limits:
    memory: "128Mi"
    cpu: "100m"

# Development environment variables
env:
  DB_HOST: "postgres.alt-database.svc.cluster.local"
  DB_NAME: "alt"
  DB_PORT: "5432"
  DB_SSL_MODE: ""
  
  # Debug configuration
  LOG_LEVEL: "debug"
  SERVICE_NAME: "pre-processor-sidecar-dev"
  
  # Inoreader API configuration (same as production)
  INOREADER_BASE_URL: "https://www.inoreader.com/reader/api/0"
  SYNC_INTERVAL: "2h"  # Development interval
  MAX_ARTICLES_PER_REQUEST: "10"  # Smaller batches for testing
  API_DAILY_LIMIT: "100"
  
  # Proxy configuration
  HTTPS_PROXY: "http://envoy-proxy.alt-apps.svc.cluster.local:8081"
  NO_PROXY: "localhost,127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,.svc.cluster.local"

# Development secret (use test credentials)
secret:
  create: true
  name: pre-processor-sidecar-dev-secrets
  data:
    INOREADER_CLIENT_ID: "dev_client_id"
    INOREADER_CLIENT_SECRET: "dev_client_secret"
    INOREADER_REFRESH_TOKEN: "dev_refresh_token"
    PRE_PROCESSOR_SIDECAR_DB_PASSWORD: "dev_password"

envFromSecret:
  name: pre-processor-sidecar-dev-secrets
  keys:
    - INOREADER_CLIENT_ID
    - INOREADER_CLIENT_SECRET
    - INOREADER_REFRESH_TOKEN
    - PRE_PROCESSOR_SIDECAR_DB_PASSWORD

# Development ConfigMap
configMap:
  create: true
  data:
    LOG_LEVEL: "debug"
    SERVICE_NAME: "pre-processor-sidecar-dev"
    API_MONITORING_ENABLED: "true"

# Development labels
commonLabels:
  environment: development
  
podLabels:
  environment: development

podAnnotations:
  linkerd.io/inject: enabled
  config.linkerd.io/skip-outbound-ports: "443"