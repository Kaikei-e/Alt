# 評価履歴サマリ

本ドキュメントは、Alt RSSリーダープラットフォームの評価履歴と改善の推移をまとめたものです。

## 評価タイムライン

| 時期 | 評価対象 | 主な結果 | 実施した改善 |
|------|---------|---------|-------------|
| Phase 1 | Recap, 分類 | カバレッジ 0.59, Top-1 Acc 0.85 | DB重複キーエラー修正 |
| Phase 2 | Recap, 要約, 分類 | カバレッジ 0.67, Top-1 Acc 0.80-0.93 | - |
| Phase 3 | 全機能 | 重大障害発生（要約0件） | 調査中 |

---

## Recap機能の推移

### カバレッジスコアの変化

```
Phase 1: 0.5905 ████████████████████
Phase 2: 0.6651 ██████████████████████ (+12.6%)
Phase 3: 0.0000 (障害発生)
```

### 主要な改善点

| 時期 | 改善内容 | 効果 |
|------|---------|------|
| Phase 1→2 | DB重複キーエラー修正 (`ON CONFLICT DO NOTHING`) | 成功率向上 |
| Phase 1→2 | クラスタリングパラメータ調整 | 高スコアジャンル増加 |

### 未解決の課題

- [ ] 大規模クラスターの自動分割
- [ ] トークン数上限の設定
- [ ] 再帰的クラスタリングの導入

---

## 要約・クラスタリング機能の推移

### カバレッジスコアの変化

```
Phase 1: 0.4204 ██████████████
Phase 2: 0.3852 █████████████
Phase 3: 0.2761 █████████
```

### 圧縮率の推移

| 時期 | 圧縮率 | 処理時間/件 |
|------|--------|------------|
| Phase 1 | 23.54% | 7.81秒 |
| Phase 2 | 24.69% | 34.03秒 |
| Phase 3 | 24.53% | 31.68秒 |

### 主要な課題

1. **ノイズ比率**: 50%超えのケースが継続
2. **シルエット係数**: 0.1未満のケースが多数
3. **要約欠落**: クラスタリング成功後の要約生成失敗が増加

---

## ジャンル分類機能の推移

### 日本語モデル (JA)

| 時期 | Top-1 Acc | Strict Acc | Macro F1 (Top-1) |
|------|-----------|------------|------------------|
| Phase 1 | 0.8469 | - | 0.8937 |
| Phase 2 | 0.8031 | 0.3854 | 0.8091 |

### 英語モデル (EN)

| 時期 | Top-1 Acc | Strict Acc | Macro F1 (Top-1) |
|------|-----------|------------|------------------|
| Phase 1 | 0.9260 | - | 0.9541 |
| Phase 2 | 0.9292 | 0.2594 | 0.9222 |

### 発見された傾向

- **Top-1 性能は安定**: 日本語 80%以上、英語 92%以上を維持
- **Strict マルチラベルは課題**: 閾値0.5では多くのジャンルでF1=0
- **長尾ジャンルの検出困難**: `film_tv`, `society_demographics` など

---

## 重要な発見と教訓

### 1. 大規模クラスターの危険性

**発見**: 100記事以上のクラスターで要約生成失敗が多発

**対策案**:
- 最大クラスターサイズ: 80-100記事
- 閾値超過時は自動分割

### 2. マルチラベル閾値の課題

**発見**: 一律閾値0.5では補助ジャンルをほぼ検出不能

**対策案**:
- ジャンル別閾値の設定
- Top-k 選択方式への移行

### 3. ノイズ対策の必要性

**発見**: HDBSCAN のデフォルトパラメータでは多くの記事がノイズに

**対策案**:
- `min_cluster_size` のジャンル別調整
- フォールバック処理の改善

---

## 今後の評価計画

### 短期（次回リリースまで）

- [ ] 要約欠落の根本原因調査
- [ ] ノイズ比率50%超えジャンルの特定と対策

### 中期（3ヶ月以内）

- [ ] マルチラベル閾値の再設計と評価
- [ ] 埋め込みモデル比較評価（bge-m3 vs e5-large）

### 長期（6ヶ月以内）

- [ ] 階層的分類モデルの検討
- [ ] 評価ダッシュボードの構築

---

## 参照ドキュメント

- [recap-evaluation.md](./recap-evaluation.md) - Recapジョブ評価詳細
- [summarization-clustering-evaluation.md](./summarization-clustering-evaluation.md) - 要約・クラスタリング評価詳細
- [genre-classification-evaluation.md](./genre-classification-evaluation.md) - ジャンル分類評価詳細
- [evaluation-methodology.md](./evaluation-methodology.md) - 評価手法の説明
