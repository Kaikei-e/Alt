# ADR-000236: SwipeFeedCard お気に入りボタンをアイコンのみに変更

## ADR's STATUS

Accepted（実装完了・サーバーテスト 368 件全パス・コンテナ healthy）

## CONTEXT

ADR-000235 で SwipeFeedCard のフッターに「Favorite」ボタンを追加したが、3 ボタン均等配置（`flex-1`）のためモバイル画面でフッター横幅が不足し、「Summary」ボタンのテキストが見切れる問題が発生した。

### 問題

1. **テキスト見切れ**: 3 ボタン均等配置で各ボタンの幅が狭くなり、「Summary」「Summarizing...」等の長いラベルが表示しきれない
2. **Favorite ボタンの役割の明確さ**: ★ アイコンはお気に入りの意味が広く認知されており、テキストラベルがなくてもユーザーは機能を理解できる

### アプローチの選択肢

| 方式 | 利点 | 欠点 |
|------|------|------|
| A. Favorite ボタンをアイコンのみに変更 | Article / Summary にスペースを確保。★ は直感的で認知負荷が低い | テキストがないため初見で機能が分かりにくい可能性（`aria-label` でアクセシビリティは維持） |
| B. 全ボタンのフォントサイズを縮小 | レイアウトの均一性を維持 | 全体の視認性が低下。根本解決ではない |
| C. フッターを 2 行レイアウトに変更 | 全ボタンにテキストを残せる | 縦方向のスペースを消費。カード表示領域が狭くなる |

## DECISION MAKING

**方式 A（Favorite ボタンをアイコンのみに変更）** を採用した。

**理由:**

1. **★ アイコンの普遍性**: 星アイコンはお気に入りの意味として広く認知されており、テキストなしでも機能が伝わる
2. **スペース効率**: Favorite ボタンがアイコン幅に収まることで、Article / Summary ボタンに十分なスペースを確保
3. **変更の最小化**: 1 ファイルの修正のみ（テスト変更不要）

### 設計

```
Before (ADR-000235):
  SwipeFeedCard Footer
    └── [Article]  [★ Favorite]  [Summary]     (flex-1 均等配置 × 3)
         flex-1       flex-1        flex-1

After:
  SwipeFeedCard Footer
    └── [Article]  [★]  [Summary]               (Article/Summary が flex-1、★ はアイコン幅)
         flex-1    auto    flex-1
```

### 状態遷移

```
通常:       ☆  (アウトライン Star, aria-label="Favorite")
保存中:     ⟳  (Loader スピナー, aria-label="Saving favorite")
登録済み:   ★  (塗りつぶし Star, aria-label="Favorited")
```

### 変更詳細

| 要素 | Before | After |
|------|--------|-------|
| `class` | `flex-1 rounded-xl ...` | `rounded-xl ...`（`flex-1` 削除） |
| テキストラベル | `Favorite` / `Saving...` / `Favorited` | なし |
| アイコンサイズ | `h-4 w-4` | `h-5 w-5`（タップ領域確保） |
| アイコン余白 | `mr-2`（テキスト用余白） | なし |
| 保存中表示 | Star アイコン + `Saving...` テキスト | `Loader` スピナー（`animate-spin`） |
| `aria-label` | 変更なし | 変更なし（アクセシビリティ維持） |

## RESULTS, EFFECTS

### 変更ファイル

| ファイル | 操作 | 変更内容 |
|---------|------|---------|
| `alt-frontend-sv/src/lib/components/mobile/feeds/swipe/SwipeFeedCard.svelte` | 修正 | Favorite ボタンから `flex-1` 削除、テキストラベル削除、アイコンサイズ変更（`h-4 w-4` → `h-5 w-5`）、`mr-2` 削除、保存中に `Loader` スピナー表示 |

### テスト影響

| ファイル | 変更 |
|---------|------|
| `SwipeFeedCard.svelte.spec.ts` | 変更不要 — テストは `page.getByRole("button", { name: /favorite/i })` で `aria-label` をクエリしており、テキストラベル削除の影響を受けない |

### 検証結果

```
Server tests: 368 passed (29 test files)
Container:    alt-frontend-sv healthy (port 4173, health endpoint OK)
```

### PROS

1. **テキスト見切れの解消**: Article / Summary ボタンに十分な横幅を確保
2. **アクセシビリティ維持**: `aria-label` はそのまま動的に変更されるため、スクリーンリーダーの挙動に影響なし
3. **視覚フィードバックの改善**: 保存中に `Loader` スピナーを表示することで、処理中であることがテキストなしでも明確
4. **テスト変更不要**: `aria-label` ベースのテストクエリにより、UI 変更がテストに影響しない設計の正しさを確認

### CONS, TRADEOFF

1. **初見の認知性**: テキストラベルがないため、★ アイコンの意味を知らないユーザーには機能が伝わりにくい可能性がある。ただし★ によるお気に入りは広く普及した UI パターンであり、実用上の問題は低い
2. **ADR-000235 からの設計変更**: ADR-000235 では「アイコン + ラベルの組み合わせ（認知しやすい）」を採用理由の一つとしていたが、モバイル画面幅の制約により方針を修正した

## APPENDIX

- 関連 ADR: [ADR-000235](./000235.md) — SwipeFeedCard にお気に入りボタンを追加
