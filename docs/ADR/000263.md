# ADR-000263: Safari iOS 自動ズーム防止 — モバイル検索 input の font-size 修正

## ステータス

承認済み

## コンテキスト

### 背景

iOS Safari は `font-size` が 16px 未満の `<input>` にフォーカスした際、ビューポートを自動ズームする仕様がある。ADR-000261 / ADR-000262 で導入したモバイル向け Bottom Sheet の検索入力には Tailwind の `text-sm` (14px) が適用されていたため、iOS ユーザーがフィルタ検索を使用するとビューポートが意図せずズームし、UX が悪化していた。

### 対象コンポーネント

| コンポーネント | 用途 |
|---------------|------|
| `SwipeFilterSortSheet.svelte` | Swipe モードのフィルタ・ソート Bottom Sheet 内検索 |
| `MobileFeedExcludeFilter.svelte` | 通常 Feeds ページのモバイル除外フィルタ Bottom Sheet 内検索 |

### 前提条件

- iOS Safari は `<input>` の computed font-size が 16px 未満の場合にフォーカス時の自動ズームを行う（Apple の仕様、`<meta name="viewport">` の `maximum-scale=1` では根本解決にならない）
- 16px (`text-base`) 以上であればズームは発生しない

## 意思決定

### アプローチ: font-size を 16px に引き上げ

| 選択 | 不採用案 | 理由 |
|------|---------|------|
| `text-sm` → `text-base` (16px) | `maximum-scale=1` を viewport meta に追加 | viewport 制約はアクセシビリティ (ピンチズーム無効化) に悪影響。WCAG 違反リスク |
| `text-sm` → `text-base` (16px) | JavaScript で `focus` イベント時にズームをリセット | ハック的で Safari のバージョン依存。UX がちらつく |
| `text-sm` → `text-base` (16px) | `font-size: 16px` を直接指定 | Tailwind のユーティリティクラスの一貫性を維持するため `text-base` を使用 |

CSS のみの変更で根本解決でき、副作用が最小限であるため `text-base` への変更を採用した。

## 結果・影響

### 変更ファイル一覧

| ファイル | 変更内容 |
|---------|---------|
| `.../swipe/SwipeFilterSortSheet.svelte` | 検索 input の `text-sm` → `text-base` |
| `.../feeds/MobileFeedExcludeFilter.svelte` | 同上 |

### 検証結果

| 検証項目 | 結果 |
|---------|------|
| コンテナ再ビルド (`alt-frontend-sv`) | ビルド成功 |
| コンテナ起動 | Started |
| ヘルスチェック (`/api/health`) | HTTP 200 |

### PROS

- iOS Safari での自動ズームが解消され、モバイルの検索 UX が向上
- CSS クラスの 1 語変更のみで副作用が極小
- `maximum-scale=1` のようなアクセシビリティ悪化を伴わない
- Tailwind ユーティリティの一貫性を維持

### CONS, TRADEOFF

- 検索 input のフォントサイズがシート内の他のテキスト (`text-sm`) より若干大きくなる。ただし input は独立した入力要素であり、視覚的な違和感は軽微

### 影響範囲

- **alt-frontend-sv**: モバイル向け Bottom Sheet の検索 input 2 箇所のみ。デスクトップビュー・その他ページは影響なし
- **alt-backend**: 変更なし
- **他サービス**: 変更なし

## 関連 ADR

- ADR-000261: モバイル向けフィードソース除外フィルタ (Filter Chip + Bottom Sheet)
- ADR-000262: Swipe モード向け Filter & Sort Bottom Sheet
