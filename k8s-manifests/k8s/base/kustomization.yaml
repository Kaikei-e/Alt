apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Core infrastructure
  - core/storage/
  - core/database/postgres/
  - core/database/auth-postgres/
  - core/database/kratos-postgres/
  - core/database/clickhouse/
  - core/search/meilisearch/
  - core/search/news-creator/
  - core/ingress/nginx/
  - core/ingress/nginx-external/

  # Security & SSL
  - secrets/auth-secrets.yaml
  - network/auth-network-policy.yaml

  # Authentication
  - auth/kratos/

  # Applications
  - apps/backend/
  - apps/frontend/
  - apps/processing/tag-generator/
  - apps/processing/pre-processor/
  - apps/processing/search-indexer/
  - apps/processing/news-creator/

  # Jobs
  - jobs/migrations/

  # Observability
  - observability/logging/rask-log-aggregator/

labels:
  - pairs:
      app.kubernetes.io/name: alt
      app.kubernetes.io/version: v1.0.0